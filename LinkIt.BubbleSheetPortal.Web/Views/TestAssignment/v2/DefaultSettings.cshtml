@using LinkIt.BubbleSheetPortal.Common;
@using LinkIt.BubbleSheetPortal.Common.Enum;
@using LinkIt.BubbleSheetPortal.Web.Helpers
@model LinkIt.BubbleSheetPortal.Web.ViewModels.TestSettingsMap
@{
    var hidden = ViewBag.AllowAdjustTestChedule != null && ViewBag.AllowAdjustTestChedule == true ? "" : "hidden";

}
<style>
    .w-35 {
        width: 35%;
    }

    .w-30 {
        width: 30%;
    }

    .sectionLvl-hide {
        display: none !important;
    }

    .cb__sectionLevel {
        display: inline-block;
        margin-left: 15px;
    }
        .sectionsAvailabilityList1 table {
            width: 100%;
        }

        .sectionsAvailabilityList1_Edit table {
            width: 100%;
        }

    .testPreferences__panel {
        margin-top: 15px;
        font-weight: 700;
        display: inline-block;
    }

    .btn__setting {
        background: var(--grey3);
        color: var(--lightBlue);
        cursor: pointer;
        padding: 10px 5px;
        font-size: 10pt;
        border-right: 1px solid var(--blue6);
        width: 135px;
        text-align: center;
        display: block;
        float: left;
    }

        .btn__setting span {
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            box-sizing: border-box;
        }

        .btn__setting:last-child {
            border-right: 0;
        }

    .sections__main1 {
        display: none;
    }

    .sections__wrapper--inner {
        min-height: 200px;
        position: relative;
    }

    .flex_space-bettween {
        display: flex;
        justify-content: space-between;
    }

    .wrapper__testSchedule .first_title {
        width: 30% !important;
    }

    .btn__setting.active__state {
        background: var(--lightBlue);
        border-bottom: none;
        color: var(--white);
        background: -webkit-gradient( linear, left top, left bottom, from(var(--white)), to(#0c5fa5), color-stop(0.03, #72c6e4) );
    }

    .flex_space-bettween {
        display: flex;
        justify-content: space-between;
    }

    .scrollHorizontal__wrapper {
        text-align: left;
        /*width: 835px;*/
        overflow-x: auto;
        overflow-y: hidden;
        white-space: nowrap;
    }

    #divDefaultSetting .accordion-scroll {
        max-height: 100%;
        height: 100%;
        overflow: initial;
    }
</style>
<div class="clearfix" style="text-align:end;">
    <div id="lastUpdateInfor"></div>
    <br />
</div>

<div class="session__wrapper scrollHorizontal__wrapper">
    <div class="clearfix testPreferences__panel testPreferences__panel--TestAssignment">
        <div class="btn__overall1 btn__setting active__state">
            <span>
                Overall Test
            </span>
        </div>
    </div>
    <div class="sections__main1 hide">
        <div id="settings_sections_default">
            <sections_wrapper></sections_wrapper>
        </div>
    </div>
</div>

<div id="accordion-preferences-setting" class="accordion overall__settings1 accordion-scroll">
    <div class="accordionDiv">
        <header class="accordion-title first active">
            <h3>Navigation/Display</h3>
            <i class="fa-solid fa-chevron-down ml-10"></i>
        </header>
        <article class="accordion-content active">
            <table class="table table-accordion u-w-p-100">
                <tbody>
                    <tr>
                        <td class="w-370 table-accordion-title">Section-Based Testing</td>
                        <td class="w-380">
                            <label id="lblsectionBasedTesting"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Auto Advance</td>
                        <td class="">
                            <label id="lblautoAdvanceTest"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Must Answer All Questions</td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblmustAnswerAllQuestions"></label>
                                </div>
                                <div class="cb__sectionLevel">
                                    <label id="mustAnswerAllQuestionsSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Can Pause Test</td>
                        <td>
                            <label id="lblcanPauseTest"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Display Answer Labels</td>
                        <td>
                            <label id="lbldisplayAnswerLabels"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Display Question Number
                        </td>
                        <td>
                            <label id="lbldisplayQuestionNumber"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Answer Label Format</td>
                        <td>
                            <label id="lblanswerLabelFormat"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Passage Position in Test Taker</td>
                        <td>
                            <label id="lblpassagePositioninTestTaker"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Display Answer Choice Guidance</td>
                        <td>
                            <label id="lbldisplayAnswerChoiceGuidance"></label>
                        </td>
                    </tr>
                    @if (Model.IsSupportQuestionGroup)
                    {
                        <tr>
                            <td class="table-accordion-title">Question Number Labeling for Grouped Questions</td>
                            <td>
                                <label id="lblquestiongrouplabelschema"></label>
                            </td>
                        </tr>
                        <tr>
                            <td class="table-accordion-title">Question Group Multiple Choices Numbering</td>
                            <td>
                                <label id="lblquestiongroupmultiplechoicesnumbering"></label>
                            </td>
                        </tr>
                    }
                    <tr class='sectionAvailability__wrapper'>
                        <td class="table-accordion-title">Section Availability</td>
                        <td>
                            <label id="lblsectionAvailability"></label>
                            @if (ViewBag.IsEditable && ViewBag.IsSectionAvailabilityEditable)
                            {
                                <div>
                                    <i class="fa-solid fa-pen" id="btnEnableEditSectionAvailability" style="float:right;margin-top:-28px;cursor:pointer;"></i>
                                </div>
                            }
                        </td>
                    </tr>
                    <tr class='sectionAvailability__wrapper'>
                        <td colspan="2">
                            <div class="sectionsAvailabilityList1">
                                <table></table>
                            </div>
                        </td>
                    </tr>
                    @if (ViewBag.IsEditable && ViewBag.IsSectionAvailabilityEditable)
                    {
                        <tr class='sectionAvailability_Edit_wrapper' style="display:none">
                            <td class="table-accordion-title">
                                Section Availability
                            </td>
                            <td>
                                <label class="switch" style="margin-right: 35px">
                                    <input type="checkbox" name="sectionAvailability_Edit" value="1">
                                    <span class="slider round"></span>
                                </label>
                                <div class="hide-input">
                                    <input type="radio" value="0" name="_sectionAvailability_Edit" checked="checked" id="sectionAvailability1_Edit" />
                                    <label for="sectionAvailability1_Edit">OFF</label>
                                    <input type="radio" value="1" name="_sectionAvailability_Edit" id="sectionAvailability2_Edit" />
                                    <label for="sectionAvailability2_Edit">ON</label>
                                </div>

                            </td>
                        </tr>
                        <tr class='sectionAvailability_Edit_wrapper' style="display:none">
                            <td colspan="2">
                                <div class="sectionsAvailabilityList1_Edit" style="display:none">
                                    <table></table>

                                </div>
                                <div class="buttons-set my-3 clearfix">
                                    <button class="float-right" id="btnSaveSectionAvailabilityList" type="button">Save</button>
                                    <button class="float-right" id="btnCancelSectionAvailabilityList" type="button">Cancel</button>
                                </div>
                            </td>
                        </tr>
                    }

                </tbody>
            </table>
        </article>
    </div>
    <div class="accordionDiv mt-16">
        <header class="accordion-title"><h3>Security and Privacy</h3><i class="fa-solid fa-chevron-down ml-10"></i></header>
        <article class="accordion-content">
            <table class="table table-accordion u-w-p-100">
                <tbody>
                    <tr>
                        <td class="w-370 table-accordion-title">@LocalizeHelper.Localized("STUDENT_AGREEMENT_TITLE")</td>
                        <td class="w-380">
                            <label id="lblrequireHonorCode"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="w-370 table-accordion-title">Require Password</td>
                        <td class="w-380">
                            <label id="lblverifyStudent"></label>
                        </td>
                    </tr>
                    <tr id="requireTestTakerAuthenticationDetail">
                        <td colspan="2" style="padding: 0 !important; width: 100%;">
                            <table style="width: 100%;">
                                <tr>
                                    <td class="w-370 table-accordion-title">
                                        Require Test Taker Authentication
                                    </td>
                                    <td class="w-380">
                                        <label id="lblrequireTestTakerAuthentication">OFF</label>
                                        @if (ViewBag.IsEditable && ViewBag.AllowAdjustRequireTestTakerAuthentication && ViewBag.IsRequireTestTakerAuthenticationEditable)
                                        {
                                            <div class="require-testTaker-authentication-group">
                                                <label class="switch">
                                                    <input type="checkbox" id="requireTestTakerAuthentication1" class="require-testTaker-authentication-action" name="requireTestTakerAuthentication" value="ON">
                                                    <span class="slider round"></span>
                                                </label>
                                                <div class="hide-input">
                                                    <input type="radio" value="0" name="requireTestTakerAuthentication" id="requireTestTakerAuthentication0" class="require-testTaker-authentication-action" /> <label for="requireTestTakerAuthentication0">OFF</label>
                                                    <input type="radio" value="1" name="requireTestTakerAuthentication" id="requireTestTakerAuthentication1" class="require-testTaker-authentication-action" /> <label for="requireTestTakerAuthentication1">ON</label>
                                                </div>
                                            </div>
                                            <div>
                                                <i class="fa-solid fa-pen" id="btnEnableEditRequireTestTakerAuthentication" style="float:right;margin-top:-28px;cursor:pointer;"></i>
                                            </div>
                                        }
                                    </td>
                                </tr>
                            </table>
                            @if (ViewBag.IsEditable && ViewBag.AllowAdjustRequireTestTakerAuthentication && ViewBag.IsRequireTestTakerAuthenticationEditable)
                            {
                                <div class="buttons-set my-3 clearfix require-testTaker-authentication-action-group">
                                    <button class="float-right" id="btnSaveRequireTestTakerAuthentication" style="margin-right: 15px" type="button">Save</button>
                                    <button class="float-right" id="btnCancelRequireTestTakerAuthentication" type="button">Cancel</button>
                                </div>
                            }
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Shuffle Questions</td>
                        <td>
                            <label id="lblshuffleQuestions"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Shuffle Multiple Choice Answers</td>
                        <td>
                            <label id="lblshuffleAnswers"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Full Screen Browser Mode
                        </td>
                        <td>
                            <label id="lbllockedDownTestTaker"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Override Auto Graded Items
                        </td>
                        <td>
                            <label id="lbloverrideAutoGradedTextEntry"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Browser Lockdown Mode
                        </td>
                        <td>
                            <label id="lblbrowserLockdownMode"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Anonymized Scoring
                        </td>
                        <td>
                            <label id="lblanonymizedScoring"></label>
                        </td>
                    </tr>
                </tbody>
            </table>
        </article>
    </div>
    <div class="accordionDiv mt-16">
        <header class="accordion-title"><h3>Accommodations</h3><i class="fa-solid fa-chevron-down ml-10"></i></header>
        <article class="accordion-content">
            <table class="table table-accordion u-w-p-100">
                <tbody>
                    <tr>
                        <td class="w-370 table-accordion-title">Time Limit</td>
                        <td class="w-380">
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lbltimeLimit"></label>
                                    <input type="hidden" id="hdfDurationId" value="@Model.Duration" />
                                    <input type="hidden" id="hdfDdeadlineId" value="@Model.Deadline" />
                                    <input type="hidden" id="hdfDurationType" value="@Model.TimeLimitDurationType" />
                                    @*<input type="hidden" id="vTimeLimitDurationValue" value="@Model.Duration" />
                                        <input type="hidden" id="vTimeLimitDeadLine" value="@Model.Deadline" />*@
                                    <input type="hidden" id="vTimeLimitShowWarning" />
                                </div>
                                <div class="cb__sectionLevel">
                                    <label id="timeLimitSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>

                    <tr id="trTimeLimitShowTimeLimitWarning">
                        <td class="table-accordion-title">
                            Show Time Limit Warning
                        </td>
                        <td>
                            <label id="lblshowTimeLimitWarning"></label>
                        </td>
                    </tr>

                    <tr id="testScheduleDetail">
                        <td colspan="2" style="padding: 0 !important;">
                            <table style="width: 100%;">
                                <tr>
                                    <td class="w-370 table-accordion-title">
                                        Test Schedule
                                    </td>
                                    <td class="w-380">
                                        <label id="lbltestSchedule">OFF</label>
                                        @if (ViewBag.IsEditable && ViewBag.AllowAdjustTestChedule != null && ViewBag.AllowAdjustTestChedule && ViewBag.IsTestScheduleEditable)
                                        {
                                            <div class="test-schedule-action-group">
                                                <label class="switch">
                                                    <input type="checkbox" id="testSchedule1" class="test-schedule-action" name="testSchedule" value="ON">
                                                    <span class="slider round"></span>
                                                </label>
                                                <div class="hide-input">
                                                    <input type="radio" value="0" name="testSchedule" id="testSchedule0" class="test-schedule-action" /> <label for="testSchedule0">OFF</label>
                                                    <input type="radio" value="1" name="testSchedule" id="testSchedule1" class="test-schedule-action" /> <label for="testSchedule1">ON</label>
                                                </div>
                                            </div>
                                            <div>
                                                <i class="fa-solid fa-pen" id="btnEnableEditScheduleMode" style="float:right;margin-top:-28px;cursor:pointer;"></i>
                                            </div>
                                        }
                                    </td>
                                </tr>
                            </table>
                            <section class="test-schedule-container-view test-schedule-container testScheduleDetail test-schedule-spacing">
                                <h4>Activate test assignments based on date and time</h4>
                                <section class="test-schedule-form test-schedule-spacing">
                                    <section class="test-schedule-spacing">
                                        <h5 class="mt-4">Active Period</h5>
                                        <div class="row">
                                            <div class="col">
                                                <label class="test-schedule-label">From</label>
                                                <input type="text" class="datepicker test-schedule-input" id="testScheduleFromDateView" name="testScheduleFromDateView" readonly="readonly" />
                                            </div>
                                            <div class="col">
                                                <label class="test-schedule-label">To</label>
                                                <input type="text" class="datepicker test-schedule-input" id="testScheduleToDateView" name="testScheduleToDateView" readonly="readonly" />
                                            </div>
                                        </div>
                                        <h5 class="mt-4">Days of Week</h5>
                                        <div class="mt-3">
                                            <input class="day-of-week-input" type="button" name="testScheduleDayOfWeek" value="Mon" style="margin-left:0;" />
                                            <input class="day-of-week-input" type="button" name="testScheduleDayOfWeek" value="Tue" />
                                            <input class="day-of-week-input" type="button" name="testScheduleDayOfWeek" value="Wed" />
                                            <input class="day-of-week-input" type="button" name="testScheduleDayOfWeek" value="Thu" />
                                            <input class="day-of-week-input" type="button" name="testScheduleDayOfWeek" value="Fri" />
                                            <input class="day-of-week-input" type="button" name="testScheduleDayOfWeek" value="Sat" />
                                            <input class="day-of-week-input" type="button" name="testScheduleDayOfWeek" value="Sun" />
                                        </div>
                                        <div class="hide-input">
                                            <input type="checkbox" name="testScheduleDayOfWeek" value="Mon" />
                                            <input type="checkbox" name="testScheduleDayOfWeek" value="Tue" />
                                            <input type="checkbox" name="testScheduleDayOfWeek" value="Wed" />
                                            <input type="checkbox" name="testScheduleDayOfWeek" value="Thu" />
                                            <input type="checkbox" name="testScheduleDayOfWeek" value="Fri" />
                                            <input type="checkbox" name="testScheduleDayOfWeek" value="Sat" />
                                            <input type="checkbox" name="testScheduleDayOfWeek" value="Sun" />
                                        </div>
                                        <h5 class="mt-4">Active Hours</h5>
                                        @if (ViewBag.IsEditable && ViewBag.IsTestScheduleEditable)
                                        {
                                            <div class="mt-2">
                                                <span for="alway-open">Always open:&nbsp;</span><span id="openStatus"></span>
                                                <label class="switch" style="margin-left: .5em;">
                                                    <input type="checkbox" name="alwayOpenCkb">
                                                    <span class="slider round"></span>
                                                </label>
                                                <input class="hide-input" type="checkbox" id="alway-open" name="alway-open" />
                                            </div>
                                        }

                                        <div class="mt-2">
                                            <div class="row">
                                                <div class="col">
                                                    <label class="test-schedule-label">Test Taking Hours - Start</label>
                                                    <input class="test-schedule-input mt-2" type="time" id="testScheduleStartTimeView" name="testScheduleStartTimeView" />
                                                </div>
                                                <div class="col">
                                                    <label class="test-schedule-label">Test Taking Hours - End</label>
                                                    <input class="test-schedule-input mt-2" type="time" id="testScheduleEndTimeView" name="testScheduleEndTimeView" />
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </section>
                            </section>
                            @if (ViewBag.IsEditable && ViewBag.AllowAdjustTestChedule != null && ViewBag.AllowAdjustTestChedule && ViewBag.IsTestScheduleEditable)
                            {
                                <div class="buttons-set my-3 clearfix">
                                    <button class="float-right" id="btnSaveSchedule" style="margin-right: 15px" type="button">Save</button>
                                    <button class="float-right" id="btnCancelSchedule" type="button">Cancel</button>
                                </div>
                            }
                        </td>
                    </tr>

                    <tr>
                        <td class="table-accordion-title">Multiple Choice Click Method</td>
                        <td>
                            <label id="lblmultipleChoiceClickMethod"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Enable Video Controls</td>
                        <td>
                            <label id="lblenableVideoControls"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Enable Audio
                        </td>
                        <td>
                            <label id="lblenableAudio"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Font Size
                        </td>
                        <td>
                            <label id="lblsupportFontsize"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Zoom
                        </td>
                        <td>
                            <label id="lblsupportZoom"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Contrast
                        </td>
                        <td>
                            <label id="lblsupportContrast"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Line Reader
                        </td>
                        <td>
                            <label id="lblsupportLineReader"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title" style="vertical-align: top;">Enable Text-To-Speech</td>
                        <td>
                            <label id="lbldisplayTexttospeechOption"></label>
                        </td>
                    </tr>
                </tbody>
            </table>
        </article>
    </div>
    <div class="accordionDiv mt-16">
        <header class="accordion-title"><h3>Tools</h3><i class="fa-solid fa-chevron-down ml-10"></i></header>
        <article class="accordion-content">
            <table class="table table-accordion u-w-p-100">
                <tbody>
                    <tr>
                        <td class="w-370 table-accordion-title">Basic Science Palette</td>
                        <td class="w-380">
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblsimplePalette"></label>
                                </div>

                                <div class="cb__sectionLevel">
                                    <label id="simplePaletteSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="w-370 table-accordion-title">Math/Science Palette</td>
                        <td class="w-380">
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblmathPalette"></label>
                                </div>

                                <div class="cb__sectionLevel">
                                    <label id="mathPaletteSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Spanish Palette</td>
                        <td>

                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblspanishPalette"></label>
                                </div>

                                <div class="cb__sectionLevel">
                                    <label id="spanishPaletteSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">French Palette</td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblfrenchPalette"></label>
                                </div>

                                <div class="cb__sectionLevel">
                                    <label id="frenchPaletteSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>

                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Protractor</td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblprotractor"></label>
                                </div>

                                <div class="cb__sectionLevel">
                                    <label id="protractorSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">6" Ruler</td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblruler6inch"></label>
                                </div>
                                <div class="cb__sectionLevel">
                                    <label id="ruler6inchSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">12" Ruler</td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblruler12inch"></label>
                                </div>
                                <div class="cb__sectionLevel">
                                    <label id="ruler12inchSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">15cm Ruler</td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblruler15cm"></label>
                                </div>
                                <div class="cb__sectionLevel">
                                    <label id="ruler15cmSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">30cm Ruler</td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblruler30cm"></label>
                                </div>
                                <div class="cb__sectionLevel">
                                    <label id="ruler30cmSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Standard Calculator
                        </td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblsupportCalculator"></label>
                                </div>

                                <div class="cb__sectionLevel">
                                    <label id="supportCalculatorSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Scientific Calculator
                        </td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblscientificCalculator"></label>
                                </div>

                                <div class="cb__sectionLevel">
                                    <label id="scientificCalculatorSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>

                        </td>
                    </tr>
                    @if (ViewBag.HideSupportHighlightText != null && ViewBag.HideSupportHighlightText == "false")
                    {<text>
                            <tr>
                                <td class="table-accordion-title">
                                    Support Highlight Text
                                </td>
                                <td>
                                    <div class="wrapper flex_space-bettween">
                                        <div>
                                            <label id="lblsupportHighlightText"></label>
                                        </div>

                                        <div class="cb__sectionLevel">
                                            <label id="supportHighlightTextSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                        </div>
                                    </div>


                                </td>
                            </tr>
                    </text>}
                    <tr>
                        <td class="table-accordion-title">
                            Eliminate Choice Tool
                        </td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lbleliminateChoiceTool"></label>
                                </div>

                                <div class="cb__sectionLevel">
                                    <label id="eliminateChoiceToolSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>

                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Flag Item Tool
                        </td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblflagItemTool"></label>
                                </div>

                                <div class="cb__sectionLevel">
                                    <label id="flagItemToolSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>


                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Equation Editor
                        </td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lblequationeditor"></label>
                                </div>

                                <div class="cb__sectionLevel">
                                    <label id="equationeditorSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">
                            Drawing Tool
                        </td>
                        <td>
                            <div class="wrapper flex_space-bettween">
                                <div>
                                    <label id="lbldrawingTool"></label>
                                </div>

                                <div class="cb__sectionLevel">
                                    <label id="drawingToolSectionItems1" class='setAtSectionLvl'>Set at Section Level</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </article>
    </div>
    <div class="accordionDiv mt-16">
        <header class="accordion-title last"><h3>Other</h3><i class="fa-solid fa-chevron-down ml-10"></i></header>
        <article class="accordion-content">
            <table class="table table-accordion u-w-p-100 last">
                <tbody>
                    <tr>
                        <td class="w-370 table-accordion-title">
                            Can Review Test
                        </td>
                        <td class="w-380">
                            <label id="lblcanReviewTest"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Hide Correct Answers and Grading Results in Student Review</td>
                        <td>
                            <label id="lblhideCorrectAnswerAndGrading"></label>
                        </td>
                    </tr>
                    @if (Model.TestExtractOptions.IsUseTestExtract)
                    {
                        <tr>
                            <td class="table-accordion-title">
                                Test Extract
                            </td>
                            <td>
                                <label id="lbltestExtract"></label>
                            </td>
                        </tr>

                        if (Model.TestExtractOptions.ShowRawOrPercentOption)
                        {
                            <tr>
                                <td class="table-accordion-title">Exported Score</td>
                                <td>
                                    <label id="lbltestExtractExportRawScore"></label>
                                </td>
                            </tr>
                        }
                    }
                    @if (Model.VirtualTestSubTypeID == 4)
                    {
                        <tr>
                            <td class="table-accordion-title">Adaptive Test</td>
                            <td>
                                <label id="lbladaptiveTest"></label>
                            </td>
                        </tr>
                    }
                    @if (Model.NavigationMethodID == (int)NavigationMethodEnum.NORMAL_BRANCHING
            || Model.NavigationMethodID == (int)NavigationMethodEnum.SECTION_BASE_BRANCHING
            || Model.NavigationMethodID == (int)NavigationMethodEnum.ALGORITHMIC_BRANCHING)
                    {
                        <tr>
                            <td class="table-accordion-title">Navigation Method</td>
                            <td>
                                <label id="lblbranchingTest"></label>
                            </td>
                        </tr>
                    }
                    <tr>
                        <td class="table-accordion-title">Show Test Instructions</td>
                        <td>
                            <label id="lblshowTestInstructions"></label>
                        </td>
                    </tr>
                    <tr>
                        <td class="table-accordion-title">Show Incomplete Answer Warning</td>
                        <td>
                            <label id="lblshowIncompleteAnswerWarning"></label>
                        </td>
                    </tr>
                </tbody>
            </table>
        </article>
    </div>

    <input id="idIsUseTestExtract" type="hidden" value="@Model.IsUseTestExtract" />
    <input id="idVirtualTestSubTypeID" type="hidden" value="@Model.VirtualTestSubTypeID" />
    <input id="idVirtualTestSourceID" type="hidden" value="@Model.VirtualTestSourceId" />
    <input id="idNavigationMethodID" type="hidden" value="@Model.NavigationMethodID" />
</div>

<script>
    var testSectionsDefaultSettings = [];

    $(function ()
    {

        testPreferenceModel = @Html.Raw(Json.Encode(Model.TestPreferenceModel));
        testSectionsDefaultSettings = testPreferenceModel.VirtualSections || [];

        testExtractOptions = @Html.Raw(Json.Encode(Model.TestExtractOptions));

       @if (Model.SettingLevel != "")
        {
            <text>
                $('#hdfPreferenceLevel').val('@Model.SettingLevel');
            </text>
        }

        @if (Model.ShowAssignmentSettings)
        {
            <text>
                BuildDistrictSettings();
                $('#hdfIsLockedbank').val('0');
                $('#aDistrictSetting').show();
                $('#btnChangeSettingGray').hide();
            </text>
        }
        else
        {
            <text>
                $('#aDistrictSetting').hide();
                $('#btnChangeSettingGray').show();
                $('#hdfIsLockedbank').val('1');
            </text>
        }
        FillReadOnlyPreferences('@ViewBag.IsReview');
        lastUpdatedString = '';
        if ('@ViewBag.LastUpdatedDate' && '@ViewBag.LastUpdatedDate' != '') {
            lastUpdatedString = '<label>Last Update: @ViewBag.LastUpdatedDate</label>';
            $('#lastUpdateInfor').empty();
            $('#lastUpdateInfor').append(lastUpdatedString);
        }

        testSectionsDefaultSettings.forEach((section, index) => {
            BindNewCkbValue('section_' + section.VirtualSectionId + '_open', 'section_' + section.VirtualSectionId + '_open_ckb');
        });
    });
</script>

<script type="text/javascript">
    (function ($) {
        'use strict';
        $('#accordion-preferences-setting .accordion-title').on('click', function () {
            var $self = $(this);
            var $accordionContent = $self.next();

            if ($self.hasClass('active')) {
                $self.removeClass('active');
                $accordionContent.slideUp();
            } else {
                $self.addClass('active');
                $accordionContent.slideDown();
            }
        });
        if ('@ViewBag.IsTeacherOrSchoolAdmin' == 'True') {
            $('input[name="overrideAutoGradedTextEntry"]').attr('disabled', 'disabled');
            $('#chklockOverrideAutoGradedTextEntry').attr('disabled', 'disabled');
        }
    }(jQuery));
</script>

<script>
    var testNavigationMethod = '@Model.NavigationMethodID';
    var sectionsOptionsToolsTagsDefaultSettings = []
    var customSectionsSetttingDefaultSettings = []
    var CAN_EDIT = false
    var CURRENTPAGE = 'TestAssignment'
</script>
<script src="@BundleHelper.Version("~/Scripts/TestPreferences/v2/defaultSettingsVue.js")" type="text/javascript"></script>
<script>
    $(function () {
        $("input[name='testSchedule']").change(function () {
            if ($(this).is(':checked')) {
                $(".testScheduleDetail").show();
                $(".testScheduleDetail tr").show();
            } else {
                $(".testScheduleDetail").hide();
                $(".testScheduleDetail tr").hide();
            }
        });

        $('input[name=testScheduleDayOfWeek]').each(function () {
            $(this).click(function () {
                var value = $(this).attr('value');
                var strInput = 'input[name=testScheduleDayOfWeek][value=' + value + ']';
                if ($(this).hasClass('btnActive')) {
                    $(this).removeClass('btnActive');
                    $(strInput).prop('checked', false);
                    $($('.testScheduleDetail').find(strInput).get(0)).prop('checked', false)
                } else {
                    $(this).addClass('btnActive');
                    $(strInput).prop('checked', true);
                    $($('.testScheduleDetail').find(strInput).get(0)).prop('checked', true)
                }

            })
        });

        setTimeout(function () {
            if (!defaultSectionLvlSettings) {
                initVueInstant();
                initViewSetting();
                testSectionsDefaultSettings.forEach((section, index) => {
                    BindNewCkbValue('section_' + section.VirtualSectionId + '_open', 'section_' + section.VirtualSectionId + '_open_ckb');
                });
            }
        }, 5000)
    });
</script>
