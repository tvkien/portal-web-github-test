@using LinkIt.BubbleSheetPortal.Models.SGO
@model LinkIt.BubbleSheetPortal.Web.ViewModels.SGO.DataPointViewModel
<fieldset class="grey-bg coolfieldset qtiItemSelector fieldset-datapoint" id="fsSelectVirtualTest">
    <legend>Select LinkIt! Test</legend>
    
    <input type="hidden" name="txtHiddenSubjectName" value="@Model.SubjectName" dataPoint="@Model.DataPointIndex"/>
    <input type="hidden" name="txtHiddenGradeId" value="@Model.GradeId" dataPoint="@Model.DataPointIndex"/>
    <input type="hidden" name="txtHiddenVirtualTestId" value="@Model.VirtualTestId" dataPoint="@Model.DataPointIndex"/>
    <input type="hidden" name="txtHiddenScoreType" value="@Model.ScoreType" dataPoint="@Model.DataPointIndex" />    
    <input type="hidden" name="txtHiddenClusterScoreFilters" value="@Model.ClusterScoreFilters" dataPoint="@Model.DataPointIndex"/>        
    <input type="hidden" name="txtRemainingAjaxRequest" value="1" dataPoint="@Model.DataPointIndex"/>

    <div class="columns" id="divItemCriteria">
        <div class="colx3-left">
            <p>
                <label>@LabelHelper.Subject</label>
                <select name="selectSubjectPreAssessmentHistorical" datapoint="@Model.DataPointIndex"></select>
            </p>
            <p>
                <label>Score Type</label>
                <select name="selectScoreTypePreAssessmentHistorical" datapoint="@Model.DataPointIndex"></select>
            </p>
        </div>
        <div class="colx3-center">
            <p>
                <label>@LabelHelper.GradeLabel</label>
                <select name="selectGradePreAssessmentHistorical" datapoint="@Model.DataPointIndex"></select>
            </p>
        </div>
        <div class="colx3-right">
            <p>
                <label>Test</label>
                <select name="selectTestPreAssessmentHistorical" datapoint="@Model.DataPointIndex"></select>
            </p>
        </div>
    </div>
</fieldset>

<fieldset class="grey-bg coolfieldset qtiItemSelector fieldset-datapoint" id="fsFilterByTag" name="fsFilterByTag" dataPoint="@Model.DataPointIndex">
    <legend>Filter by Cluster/Strands (Optional)</legend>
    <label>
        Associated Cluster/Strands                    
    </label>
    <article class="u-m-t-5 clearfix">
        <div class="colx3-left">
            <div id="divTopic" style="float: left; padding-right: 5px; width: 100%;">
                <div class="block-content form noPadding divItem" style="padding: 1px;">
                    <div class="block-filter">
                        <table name="dataTableClusterScore" id="dataTableClusterScore@(Model.DataPointIndex)" dataPoint="@Model.DataPointIndex" class="datatable table no-margin noPadding dataTableDefaultTagStyle table-sgo-filter">
                            <thead>
                                <tr>
                                    <th scope="col" style="width: 15px"></th>
                                    <th scope="col">
                                        <span class="column-sort">
                                            <a href="javascript:void(0)" title="Sort Up" class="sort-up"></a>
                                            <a href="javascript:void(0)" title="Sort Down" class="sort-down"></a>
                                        </span>
                                        Cluster/Strands
                                    </th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </article>
</fieldset>

<script>
    $(function () {
        // All functions are at index.cshtml file

        populateSubjectsPreAssessmentHistorical('@Model.DataPointIndex');
        LoaddataTestResultSubScoreTable('@Model.DataPointIndex');

        $('fieldset[name="fsFilterByTag"][datapoint=@Model.DataPointIndex]').coolfieldset({ collapsed: true });
    });
</script>
