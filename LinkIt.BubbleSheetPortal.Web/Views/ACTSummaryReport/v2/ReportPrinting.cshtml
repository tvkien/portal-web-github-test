@{
    Layout = null;
}
@using LinkIt.BubbleSheetPortal.Common.Enum
@model LinkIt.BubbleSheetPortal.Web.ViewModels.ACTSummaryReport.ActSummaryReportViewModel
<!DOCTYPE html>

<html style="background: white !important;">
<head>
    <title></title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <style>
        body {
            font-family: Verdana,Arial,Helvetica,sans-serif;
            min-height: 100%;
            color: var(--dark);
            font-size: 9px;
        }

        .container_12 {
            margin-left: auto;
            margin-right: auto;
            width: 960px;
        }

        #control-bar, .columns, .content-columns, article {
            display: block;
        }

        article {
            margin-top: 3em;
        }

            #control-bar:after, .columns:after, .content-columns:after, article:after {
                clear: both;
                content: ' ';
                display: block;
                font-size: 0;
                line-height: 0;
                visibility: hidden;
                width: 0;
                height: 0;
            }

        .grid_12 {
            /* display: inline; */
            /* float: left; */
            margin-left: 10px;
            margin-right: 10px;
        }

            .grid_12 > div {
                background: none !important;
            }

                .grid_12 > div > div:nth-child(2) {
                    width: 100% !important;
                    background: ghostwhite !important;
                    text-align: center !important;
                }

                    .grid_12 > div > div:nth-child(2) > div {
                        width: 350px;
                        text-align: left;
                        margin: 0 auto;
                    }

        section {
            margin-bottom: 3em;
        }

        p, th, td {
            line-height: 1.25em;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
            /* table-layout: fixed; */
        }

        #header {
            color: #06F;
        }

        /* .left-col {
                float: left;
                width: 70px;
                text-align: left;
                margin-top: 42px;
            } */

        .left-col ul {
            list-style-type: none;
            padding: 0px;
            margin: 0px;
        }

            .left-col ul li {
                /* display: inline-block; */
                width: 100%;
            }

                .left-col ul li:last-child {
                    font-weight: bold;
                }
        /*
            .right-col {
                float: left;
                width: auto;
            } */

        .right-col table {
            border-right: solid 1px var(--borderColor);
            /* float: left; */
            padding: 0px;
            margin: 0px 0px 50px 0px;
        }

            .right-col table tr td {
                text-align: center;
                padding: 5px;
                vertical-align: middle;
            }

                .right-col table tr td:nth-of-type(1) {
                    text-align: left;
                    border-right: solid 1px var(--borderColor);
                }

            .right-col table tr:nth-of-type(2) td {
                border-bottom: solid 1px var(--black);
            }

            .right-col table tr:nth-of-type(1) td {
                border-top: solid 1px var(--borderColor);
            }

                .right-col table tr:nth-of-type(1) td:nth-of-type(1) {
                    border-top: solid 1px transparent;
                }

            .right-col table tr:nth-of-type(2) td:nth-of-type(1) {
                border-bottom: solid 1px transparent;
            }

            .right-col table tr:nth-last-child(1) td {
                border-top: solid 1px var(--black);
                border-bottom: solid 1px var(--borderColor);
            }

                .right-col table tr:nth-last-child(1) td:nth-of-type(1) {
                    border-top: solid 1px transparent;
                    border-bottom: solid 1px transparent;
                }

            .right-col table tr:last-child td {
                font-weight: bold;
            }

            .right-col table tr td.hidden {
                width: 0px;
                padding: 0px;
            }

        /*.col2 {
                position: relative;
                z-index: 2;
                background-color: white;
                margin-left: -110px !important;
            }

            .col3 {
                position: relative;
                z-index: 3;
                background-color: white;
            }

            .col1 {
                position: relative;
                z-index: 1;
                background-color: white;
                margin-left: -110px !important;
            }*/

        #wrapper {
            background-color: white;
            width: 96%;
            height: auto;
            margin: 10px auto;
            position: relative;
            /* float: left; */
        }

        #baseline {
            background-color: white;
            max-width: 1000px !important;
            height: auto;
            float: left;
            margin: 10px auto;
            position: relative;
            /* border-right: 1px solid var(--borderColor); */
        }

        .block-content > div:after {
            content: '';
            clear: both;
            float: none;
            display: table;
        }

        .block-content > div {
            max-width: 900px;
            margin: 0 auto;
        }

        #baseline:after {
            content: '';
            clear: both;
            float: none;
            display: table;
        }
    </style>
    <style type="text/css">
        .hiden-column td:first-child {
            visibility: hidden;
        }

        table td:first-child {
            width: 100px;
        }

        .table-inline td:first-child {
            visibility: hidden;
            /* display: none; */
        }

        .table-inline {
            table-layout: fixed;
            margin-left: -100px !important;
        }

        .table-inline td {
            height: 100%;
        }

        .table-inline.table0 {
            margin-left: 0 !important;
        }

        .table-inline.table0 td {
            visibility: initial;
            display: table-cell;
        }

        .block-content {
           max-width: 800px;
       }
       .block-content > div {
           max-width: 700px;
           margin: 0 auto;
       }
       #baseline:nth-child(4n) .table-inline {
            visibility: initial;
            margin-left: 0 !important;
        }
        #baseline:nth-child(4n) .table-inline td:first-child {
            visibility: initial;
        }
        @@page{
            margin: 30px 0 0 0;
            padding: 0 10px 10px 0;
            @@bottom-right  {
                font-family: Verdana,Arial,Helvetica,sans-serif;
                content: "Page " counter(page) " of " counter(pages);
                margin: -50px 0 0 -50px;
                font-size: 10px;
                padding-right: 10px;
                width: 200px;
            }
            @@bottom-left {
                font-family: Verdana,Arial,Helvetica,sans-serif;
                content: string(datetime);
                font-size: 10px;
                margin: -50px 0 0 50px;
            }
        }
        #baseline:nth-child(4n) .table-inline {
            page-break-before: always;
            page-break-inside: none;
        }
        h1#current-date-time {
            string-set: datetime content()
        }
        .grid_12 > div > div img  {
            width: 128px;
        }
        .grid_12 > div > div:nth-child(2) > div:nth-child(1) {
            font-size: 20px !important;
        }

    </style>

    <style type="text/css">
        @{
           foreach (var item in Model.Css)
                {
                    @Html.Raw(item);
                }
        }
    </style>


</head>
<body>
    <h1 style="display:none" id="current-date-time"></h1>
    <article class="container_12">
        <section class="grid_12" style="width: 1000px; margin-left: 0px; margin-right: 0px;">
            <div class="block-content form" style="background: ghostwhite">
                <div style="padding-left: 50px; display: inline-block; vertical-align: top; float: left;">
                    <span>
                        @if (string.IsNullOrEmpty(Model.DistrictLogoUrl))
                        {
                            <text>@Model.DistrictName</text>
                        }
                        else
                        {
                            <text><img src="@Model.DistrictLogoUrl" /></text>
                        }
                    </span>
                </div>
                <div style="margin-left: 50px; vertical-align: top; padding-bottom: 15px; padding-left:230px; max-width: 468px">
                    @if (Model.VirtualTestSubTypeId == (int)VirtualTestSubType.NewACT)
                    {
                        <div style="font-size: 30px; padding-bottom: 5px;">ACT SUMMARY</div>
                    }
                    else
                    {
                        <div style="font-size: 30px; padding-bottom: 5px;">OLD ACT SUMMARY</div>
                    }
                    <div>Test: @Model.TestNames</div>
                    <div>School: @Model.SchoolName</div>
                    <div>Teacher: @Model.TeacherName</div>
                    <div>Term: @Model.DistrictTermName</div>
                    <div>Class: @Model.ClassName</div>
                </div>

                <div class="block-content form">
                    <div>
                        @for (int index = 0; index < Model.ListTestReport.Count; index++)
                        {
                            //remove this logic
                            // Do not print improvement whenever there's only one selected test.
                            //if (Model.ListTestReport.Count <= 3 && index == Model.ListTestReport.Count - 1)
                            //{
                            //    break;
                            //}

                            var testReport = Model.ListTestReport[index];
                            testReport.Index = index;
                            @Html.Raw(Html.Partial("_SingleTestReport", testReport).ToHtmlString())
                        }
                    </div>
                    <div class="clear"></div>
                </div>
            </div>
        </section>
    </article>
</body>
</html>
<script src="@Url.Content("~/FeLibs/jquery/jquery.min.js")" type="text/javascript"></script>
<script>
        @{
            foreach (var item in Model.JS)
                {
                    @Html.Raw(item);
                }
        }
</script>
<script>
    $(function () {
         var date = new Date();
    var dateString = (date.getMonth() + 1) + '/' + date.getDate() + '/' + date.getFullYear()
        + ' ' + formatAMPM(date);
    $("#current-date-time").html(dateString);


    function formatAMPM(date) {
        var hours = date.getHours();
        var minutes = date.getMinutes();
        var seconds = date.getSeconds();
        var ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12;
        hours = hours ? hours : 12; // the hour '0' should be '12'
        minutes = minutes < 10 ? '0' + minutes : minutes;
        seconds = seconds < 10 ? '0' + seconds : seconds;
        var strTime = hours + ':' + minutes + ':' + seconds + ' ' + ampm;
        return strTime;
    }
        var tables = $('table');
        var formWidth = 900;
        var marginValue = 100;
        var currentWidth = 0;
        var count = 0;
        var standardTrHeight = [];
        var tableWidth = 300;
        tables.each(function (index, item) {
            $(item).addClass('table-inline table' + index);
            var $item = $(item)[0].clientWidth;
            var itemWidth = $item;
            if (formWidth / tables.length < tableWidth) {
                itemWidth = tableWidth;
                $(item).css('width', tableWidth + "px");
            } else {
                itemWidth = formWidth / tables.length;

                $(item).css('width', formWidth / tables.length + "px");
            }
            if (itemWidth - marginValue + currentWidth < formWidth) {
                currentWidth = currentWidth + itemWidth - marginValue;
                if (count == 0) {
                    var standardTrList = $('.table' + index + ' tr');
                    standardTrList.each(function (trIndex, tr) {
                        standardTrHeight[trIndex] = $(tr)[0].clientHeight;
                    });
                }
                else if (count > 0) {
                    $(item).addClass('hiden-column');
                    $(item).css({
                        'margin-left:-': marginValue + 'px !important',
                        'z-index': count + ';'
                    });
                }
                var trList = $('.table' + index + ' tr');
                trList.each(function (trIndex, tr) {
                    $(tr).css('height', standardTrHeight[trIndex] + 'px ');
                    $(tr.children).each(function (tdIndex, td) {
                        $(td).css('height', standardTrHeight[trIndex] + 'px ');
                    });
                    $(tr).css('height', standardTrHeight[trIndex] + 'px ');
                });
                count++;
            } else {
                currentWidth = itemWidth - marginValue;
                count = 0;
                var standardTrList = $('.table' + index + ' tr');
                standardTrList.each(function (trIndex, tr) {
                    standardTrHeight[trIndex] = $(tr)[0].clientHeight;
                });
                count++;
            }
        });
    });
</script>

