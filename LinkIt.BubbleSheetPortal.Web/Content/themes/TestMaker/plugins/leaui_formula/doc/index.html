<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<head lang="en">
	<meta http-equiv="content-type" content="text/html;charset=utf-8">
	<title>CKEditor4 Formula Editor Documentation</title>
	<!-- Framework CSS -->
	<link rel="stylesheet" href="assets/blueprint-css/screen.css" type="text/css" media="screen, projection">
	<link rel="stylesheet" href="assets/blueprint-css/print.css" type="text/css" media="print">
	<!--[if lt IE 8]><link rel="stylesheet" href="assets/blueprint-css/ie.css" type="text/css" media="screen, projection"><![endif]-->
	<link rel="stylesheet" href="assets/blueprint-css/plugins/fancy-type/screen.css" type="text/css" media="screen, projection">
	<style type="text/css" media="screen">
		p, table, hr, .box { margin-bottom:25px; }
		.box p { margin-bottom:10px; }
	</style>
</head>


<body>
	<div class="container">
		<h1 class="center">CKEditor4 Formula Editor Documentation</h1>
		
		<div class="borderTop">
			<div class="span-6 colborder info prepend-1">
				<p class="prepend-top">
					<strong>
					By: leaui<br>
					Email: <a href="mailto:leaui@leaui.com">leaui@leaui.com</a>
					</strong>
				</p>
			</div><!-- end div .span-6 -->		
	
			<div class="span-12 last">
				<p class="prepend-top append-0">Thank you for purchasing my theme. If you have any questions that are beyond the scope of this help file, please feel free to email via my user page contact form <a href="http://themeforest.net/user/leaui">here</a>. Thanks so much!
				<br>
				<a href="http://leaui.com/ckeditor/leaui_formula.html">Live Demo</a></p>
			</div>
		</div><!-- end div .borderTop -->
		
		<hr>
		
		<h2 id="toc" class="alt">Table of Contents</h2>
		<ul>
			<li><a href="#install">1. How to install it</a></li>
			<li><a href="#files">2. Files and Structure</a></li>
			<li><a href="#files">3. How does it works</a></li>
		</ul>
		
		<hr>
		
		<h2 id="install"><strong>1. How to install it</strong> - <a href="#toc">top</a></h2>
		<ol>
		<li>Upload the files to the ckeditor pluginsâ€™ folder.

		</li>
		<li>Update your ckeditor config.js to add `leaui_formula` plugin, eg:
<pre>
config.toolbar = [
	['LeauiFormula'], ['Bold', 'Italic', '-', 'NumberedList', 'BulletedList', '-', 'Link', 'Unlink' ],
	[ 'FontSize', 'TextColor', 'BGColor']
];
config.extraPlugins = 'leaui_formula';

</pre>
Or you can update your ckeditor configuration when create it:
<pre>
CKEDITOR.replace( 'editor1' , {
	toolbar: [
		['LeauiFormula'], ['Bold', 'Italic', '-', 'NumberedList', 'BulletedList', '-', 'Link', 'Unlink' ],
		[ 'FontSize', 'TextColor', 'BGColor']
	],
	extraPlugins: 'leaui_formula'
});
</pre>
</li>
</ol>

		<hr>

		<h2 id="files"><strong>2. Files and Structure</strong> - <a href="#toc">top</a></h2>
		The main files and directories contains:
		<ul>
<li>plugin.js, CKEditor4 plugin script</li>
<li>icons/icon.png, the formula icon</li>
<li>samples/leaui_formula.html, a sample to how to use the plugin</li>
<li>formula/, the formula lib and assets.
	<ul>
		<li>formula/js, the formula scripts</li>
		<li>formula/assets, the formula images, styles</li>
		<li>formula/resource, the formula fonts</li>
	</ul>
</li>
		</ul>

		<hr>

		<h2 id="files"><strong>3. How does it work</strong> - <a href="#toc">top</a></h2>
		<p>
			This plugin use the <a href="http://gongshi.baidu.com/">Kity Formula Editor</a> as the fomular editor. 
		</p>
		<p>Firstly, the editor use the SVG to generator the formular, and when insert to CKEditor, it get the formular's base64 image data and set the base64 data as the image's src.
		</p>
		<h3>How to init the fomular and get formula's data</h3>
		<p>In the plugin's main file: index.html.
		</p>
		<p>
			Init formular editor:
			<pre>var factory = kf.EditorFactory.create($("#kfEditorContainer")[0], {
        render: {
            fontsize: 24
        },
        resource: {
            path: "./formula/resource/"
        }
});</pre>

			Execute Kity Formula Editor command to get data:
			<pre>
function getData(callback) {
    if(kfe) {
        kfe.execCommand('get.image.data', function(data) {
            callback(data.img);
        });
    } else {
        callback(false)
    }
}</pre>
			And the plugin.js will call the getData function to get fomular's data.
		</p>

		<h3>How to save image's base64 data to a file</h3>
		<p>
			The formula in CKEditor is a image which the src is the base64 data. If you want to save the base64 data to a file and change the src to a filename. There are two method to do it:
			<ol>
				<li>Method 1: When post the data to server, you can post the images data to server firstly, and save the data on the server, the server return the data's filename, and you change the image'src to the filename. then post the modified data to server.</li>
				<li>
					Method 2: Post all the data to server. On the server, you must get the image's base64 data with Regexp and save the data to file, and change the image's src; then save the modified data to database;
				</li>
			</ol>
		</p>

		<hr>
		
		<p>Once again, thank you so much for purchasing this theme. As I said at the beginning, I'd be glad to help you if you have any questions relating to this theme. No guarantees, but I'll do my best to assist. If you have a more general question relating to the themes on ThemeForest, you might consider visiting the forums and asking your question in the "Item Discussion" section.</p> 
		
		<p class="append-bottom alt large"><strong>Leaui</strong></p>
		<p><a href="#toc">Go To Table of Contents</a></p>
		
		<hr class="space">
	</div><!-- end div .container -->
</body>
</html>